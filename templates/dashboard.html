<div id="dashboardBackground" ng-style="dashboardStyle"></div>
<div class="container-fluid page" id="dashboard">
	<div class="widgets" class="grid-stack" gridstack options="gridOptions" on-change="onGridChange(event,items)" on-drag-start="onGridDragStart(event,ui)" on-drag-stop="onGridDragStop(event,ui)" on-resize-start="onGridResizeStart(event,ui)" on-resize-stop="onGridResizeStop(event,ui)">
		<div ng-repeat="widget in flat.widgets | filter: {visible: '1'} | orderBy:'place' as allWidgets" class="moveWidget" id="{{widget.id}}" gridstack-item gs-item-x="widget.x" gs-item-y="widget.y" gs-item-width="widget.width" gs-item-height="widget.height" gs-item-autopos="1">
			<div class="move widget" >
				<div class="panel panel-default" ng-style="widgetStyle">
					<div class="panel-heading" ng-style="headerStyle">
						<h3>{{widget.title}}</h3>
						<div class="resize">
							<i class="fa fa-window-restore" aria-hidden="true" ng-click="changeWidgetSize(widget.id, widget.size)" data-toggle="tooltip" title="Resize widget" onmouseenter="$(this).tooltip()"></i>
							<i ng-if="!widget.user || widget.user.id === user.id || user.role === 'ROLE_ADMIN'" class="fa fa-times" aria-hidden="true" ng-click="deleteWidget(widget.id)" data-toggle="tooltip" title="Delete widget" onmouseenter="$(this).tooltip()"></i>
						</div>
					</div>
					<div ng-include="'widgets/' + widget.widget_type + '.html'"></div>
				</div>
			</div>
		</div>
		<h2 ng-hide="allWidgets.length" class="text-center">There are no widgets set.</h2>
	</div>
	<div ng-click="showWidgetDialog($event)" class="addWidgetBtn">
		<md-button class="md-fab md-medium md-primary" aria-label="Add widget">
			<md-icon md-svg-src="bower_components/material-design-icons/content/svg/design/ic_add_48px.svg"></md-icon>
		</md-button>
	</div>
</div>